/*!
 * angular-incremental-list v0.3.0
 * https://github.com/tfoxy/angular-incremental-list
 *
 * Copyright 2015 TomÃ¡s Fox
 * Released under the MIT license
 */
!function(){"use strict";function e(){return{restrict:"A",priority:h,controller:f,link:function(e,t,i,n){n.postInitialize()}}}function t(){return{restrict:"A",require:"ilList",link:{pre:function(e,t,i,n){var r=e.$index;if("number"!=typeof r)throw new Error("scope.$index is not a number. Got: "+r);n.scopeCreatedAt(r,e)}}}}function i(){return{restrict:"A",require:["^ilList","ngModel"],link:function(e,t,i,n){var r=n[0],l=n[1],o=i.ilItemModel?e.$eval(i.ilItemModel):e,c=function(){r.listItemChanged(o.$index,l)};l.$viewChangeListeners.push(c),p(o.$$ilListModels,l,e)}}}function n(){return{restrict:"A",require:"ilList",priority:L,link:function(e,t,i,n){n.createItem=function(e){return e.$eval(i.ilNewItem,n.localScope)}}}}function r(){return{restrict:"A",require:"ilList",priority:L,link:function(e,t,i,n){n.mustIncrement=function(e){return e.$eval(i.ilIncreaseOn,n.localScope)}}}}function l(){return{restrict:"A",require:"ilList",priority:L,link:function(e,t,i,n){n.mustIncrement=function(e){return e.$eval(i.ilIncrementOn)}}}}function o(){return{restrict:"A",require:"ilList",priority:L,link:function(e,t,i,n){n.mustDecrement=function(e){return e.$eval(i.ilDecreaseOn,n.localScope)}}}}function c(){return{restrict:"A",require:"ilList",priority:L,link:function(e,t,i,n){n.mustDecrement=function(e){return e.$eval(i.ilDecrementOn,n.localScope)}}}}function s(){return{restrict:"A",require:["^^ilList","ilList"],priority:L,link:function(e,t,i,n){var r=n[0],l=n[1];l.notifyParentList=function(e,t){var n=i.ilListModel?e.$eval(i.ilListModel):e.$parent;r.listItemChanged(n.$index,t)},p(e.$$ilListChildCtrls,l,e)}}}function u(){return{restrict:"A",require:"ilList",priority:L,link:function(e,t,i,n){var r=parseInt(i.ilMinLength);n.minLength=r>0?r:0}}}function a(){return{restrict:"A",require:"ilList",priority:L,link:function(e,t,i,n){var r=parseInt(i.ilMaxLength);n.maxLength=r>0?r:0}}}function f(e,t){function i(){var e=g.list;if(angular.isUndefined(e)||null===e)throw Error("ilList is "+e+": "+t.ilList)}function n(e,t){if("number"!=typeof e)throw new Error("scope.$index is not a number. Got: "+e);var i=g.list.length,n=r(e);g.localScope.$ilList.changed=t,e===i-1&&i<g.maxLength?c(n,I):e===i-2&&i>g.minLength&&s(n,I),delete g.localScope.$ilList.changed,g.notifyParentList(n,t)}function r(e){return e>=g.list.length||0>e?null:g.list[e][v]}function l(e){return r(e.$index-1)}function o(e){return r(e.$index+1)}function c(e){g.mustIncrement(e)?g.list.push(g.createItem(e)):e.$first||s(e)}function s(e){var t=e.$last?l(e):o(e);g.mustDecrement(e)&&g.mustDecrement(t)&&(e.$last||g.list.pop(),u(l(e)))}function u(e){var t,i,n=g.minLength-1,r=e;for(t=i=g.list.length-2;t>=n&&g.mustDecrement(r);--t,r=l(r));g.list.splice(t+1,i-t)}function a(){return{}}function f(){var t=g.list.length,i=r(t-1)||e;if(t<g.minLength){var n=new m(g.minLength-t,g,d);g.scopeCreatedAt=n.scopeCreatedAt.bind(n),n.pushItem(i)}else t>g.maxLength&&g.list.splice(g.maxLength,t-g.maxLength)}function d(e,t){var i=g.list[e];Object.defineProperty(i,v,{configurable:!0,enumerable:!1,value:t}),t.$$ilListModels=[],t.$$ilListChildCtrls=[],t.$on("$destroy",function(){delete i[v]})}function p(e,t){var i=t?"$modelValue":"$viewValue",n=function(t){var r=t.$$ilListModels.every(function(t){return e^!h(t[i])});return r?t.$$ilListChildCtrls.every(function(e){return e.list.every(function(e){return n(e[v])})}):!1};return n}function L(){var e=g.localScope.$ilList.changed.$modelValue;return h(e)}function h(e){return e||0===e}function $(){var e=g.localScope.$ilList.changed.$viewValue;return h(e)}var g=this,I={$ilList:{emptyModel:p(!1,!0),emptyView:p(!1,!1),fullModel:p(!0,!0),fullView:p(!0,!1),modelExists:L,viewExists:$}};g.createItem=a,g.list=e.$eval(t.ilList),g.listItemChanged=n,g.localScope=I,g.maxLength=9007199254740991,g.minLength=1,g.mustDecrement=I.$ilList.emptyView,g.mustIncrement=L,g.notifyParentList=angular.noop,g.postInitialize=f,g.scopeCreatedAt=d,i()}function m(e,t,i){this._countdown=e,this._vm=t,this._scopeCreatedAt=i}function d(e,t){var i=e.indexOf(t);i>=0&&e.splice(i,1)}function p(e,t,i){e.push(t),i.$on("$destroy",function(){d(e,i)})}var L=2e3,h=3e3,v="$$ilListScope";angular.module("incrementalList",[]).directive("ilList",e).directive("ilList",t).directive("ilItemModel",i).directive("ilNewItem",n).directive("ilIncreaseOn",r).directive("ilDecreaseOn",o).directive("ilIncrementOn",l).directive("ilDecrementOn",c).directive("ilListModel",s).directive("ilMinLength",u).directive("ilMaxLength",a),f.$inject=["$scope","$attrs"],m.prototype.pushItem=function(e){this._vm.list.push(this._vm.createItem(e)),--this._countdown<=0&&(this._vm.scopeCreatedAt=this._scopeCreatedAt)},m.prototype.scopeCreatedAt=function(e,t){this._scopeCreatedAt(e,t),this.pushItem(t)}}();